<%= form_for(@post) do |f|%>
    <p>
        <%= f.label :title %>
        <%= f.text_field :title %>
    </p>

    <p>
        <%= f.label :content %>
        <%= f.text_field :content %>
    </p>

    <% # How can I build a checkbox for each category? %>
    <% Category.all.each do |c| %>
        <p> 
            <label for="category_id_<%=c.id%>"><%= c.name %></label>
            <input type="checkbox" name="post[category_ids][]" id="category_id_<%=c.id%>" value="<%=c.id%>">
        </p>
    <%end%>

    <input type="text" id="post_categories_attributes_0_name" name="post[categories_attributes][0][name]">
    <input type="text" id="post_categories_attributes_1_name" name="post[categories_attributes][1][name]">

    <%= f.submit%>
<%end%>